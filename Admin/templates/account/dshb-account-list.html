{% extends 'base2.html' %}
{% load static %}
{% block content %}

          <div class="dashboard__main">
            <div class="dashboard__content bg-light-4">
              <div class="row pb-50 mb-10">
                <div class="col-auto">

                  <h1 class="text-30 lh-12 fw-700">Tələbələr</h1>
                  <div class="mt-10">Bütün tələbələr ilə bu bölmədə tanış ola bilərsiniz</div>

                </div>
              </div>

              {% include "messages.html" %}

              <div class="row y-gap-30">
                <div class="col-12">
                  <div class="rounded-16 bg-white -dark-bg-dark-1 shadow-4 h-100">
                    <div class="tabs -active-purple-2 js-tabs">
                      <div class="tabs__controls d-flex items-center pt-20 px-30 border-bottom-light js-tabs-controls">
                        <button class="text-light-1 lh-12 tabs__button js-tabs-button is-active" data-tab="tab1" data-tab-target=".-tab-item-1" type="button">
                          Tələbələr
                        </button>
                        <button class="text-light-1 lh-12 tabs__button js-tabs-button ml-30" data-tab="tab2" data-tab-target=".-tab-item-2" type="button">
                          Tələbənin Təlimləri
                        </button>
                        <button class="text-light-1 lh-12 tabs__button js-tabs-button ml-30" data-tab="tab3" data-tab-target=".-tab-item-3" type="button">
                          Qruplar
                        </button>
                        <button class="text-light-1 lh-12 tabs__button js-tabs-button ml-30" data-tab="tab4" data-tab-target=".-tab-item-4" type="button">
                          Məzunlar (KEB)
                        </button>
                        <button class="text-light-1 lh-12 tabs__button js-tabs-button ml-30" data-tab="tab5" data-tab-target=".-tab-item-5" type="button">
                          Tələbələrin rəyi (icazə verilən)
                        </button>
                        <button class="text-light-1 lh-12 tabs__button js-tabs-button ml-30" data-tab="tab6" data-tab-target=".-tab-item-6" type="button">
                          Tələbələrin rəyi
                        </button>
                      </div>

                      <div class="tabs__content py-30 px-30 js-tabs-content">
                        <div class="tabs__pane -tab-item-1 is-active" data-pane="tab1">
                          <div class="row y-gap-10 ">

                            <div class="col-auto">
                              <form class="search-field border-light rounded-8 h-50" action="." method="get">
                                  <input class="bg-white -dark-bg-dark-2 pr-50" type="text" name="s" placeholder="Tələbə axtar" value="{{ request.GET.s }}">
                                  <button class="" type="submit">
                                      <i class="icon-search text-light-1 text-20"></i>
                                  </button>
                              </form>
                            </div>

                            <div class="col-auto">
                              <div class="d-flex flex-wrap y-gap-10 x-gap-20">
                                <div>
                                </div>
                                <div>
                                  <a href="{% url "account_add" %}" class="button -icon -purple-3 h-50 text-purple-1" title="Əlavə et" style="background:#5cb85c;color:white!important;">
                                    Qeydiyyat &nbsp;&nbsp; &nbsp;<i class="fa fa-plus" aria-hidden="true"></i>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>

                                                    <style>
                            .tDiv{
                              width:100%;
                              overflow-x:scroll;
                            }

                            {% comment %} .dif{
                              display:block!important;
                            } {% endcomment %}

                            .wt{
                              min-width:30px!important;
                              height:30px!important;
                              padding:8px!important;
                              float:left!important;
                              margin:5px;
                            }

                            .menusuboper{
                              width: 195px;
                              height:40px;
                              float: left;
                            }

                            .c{
                              color: white!important;
                            }

                            table.table td{
                              padding: 10px;
                            }
                          </style>

                          <div class="tDiv">
                            <div class="table-responsive">
                              <table class="table" style="margin-top:25px; padding: 0px;">
                                <thead>
                                  <tr>
                                    <th>№</th>
                                    <th>Ad Soyad</th>
                                    <th>ID Kod</th>
                                    <th>E-poçt</th>
                                    <th>FİN</th>
                                    <th>Şəkil</th>
                                    <th>Telefon nömrəsi</th>
                                    <th>Doğum tarixi</th>
                                    <th>Balans</th>
                                    <th>İnstagram</th>
                                    <th>Twitter</th>
                                    <th>Facebook</th>
                                    <th>Github</th>
                                    <th>YouTube</th>
                                    <th>LinkedIn</th>
                                    <th>Əməliyyatlar</th>
                                  </tr>
                                </thead>
                                <tbody>

                                  {% for student in students %}
                                    <tr>
                                      <td>{{ forloop.counter }}</td>
                                      <td>{{ student.first_name }} {{ student.last_name }}</td>
                                      <td>{{ student.id_code }}</td>
                                      <td>{{ student.email }}</td>
                                      <td>{{ student.FIN }}</td>
                                      {% if student.image %}
                                        <td><img width="50" height="50" src="{{ student.image.url }}" alt=""></td>
                                      {% else %}
                                        <td>-----</td>
                                      {% endif %}
                                      <td>{{ student.number }}</td>
                                      <td>{{ student.birthday|date:"F j, Y" }}</td>
                                      <td>{{ student.balance }}</td>
                                      <td><a href="{{ student.instagram }}">{{ student.instagram }}</a></td>
                                      <td><a href="{{ student.twitter }}">{{ student.twitter }}</a></td>
                                      <td><a href="{{ student.facebook }}">{{ student.facebook }}</a></td>
                                      <td><a href="{{ student.github }}">{{ student.github }}</a></td>
                                      <td><a href="{{ student.youtube }}">{{ student.youtube }}</a></td>
                                      <td><a href="{{ student.linkedIn }}">{{ student.linkedIn }}</a></td>
                                      <td>
                                        <div class="menusuboper">
                                          <a href="{% url "account_look" student.pk %}" class="button  -icon wt dif -purple-3 h-50 text-purple-1" title="Ətraflı">
                                            <i class="fa fa-eye" aria-hidden="true"></i>
                                          </a>
                                          <a href="{% url "account_edit" student.pk %}" class="button -icon wt dif -purple-3 h-50 text-purple-1" title="Redaktə">
                                            <i class="fa fa-pencil" aria-hidden="true"></i>
                                          </a>
                                          {% comment %} <form method="post" action="" style="display: inline;">
                                            {% csrf_token %}
                                            <button type="submit" class="button -icon wt dif -purple-3 h-50 text-purple-1" style="background:#c9302c; color:white" title="Sil">
                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                            </button>
                                          </form> {% endcomment %}
                                        </div>
                                      </td>
                                    </tr>
                                  {% endfor %}

                                </tbody>
                              </table>
                            </div>
                          </div>

                        </div>

                        <div class="tabs__pane -tab-item-2" data-pane="tab2">
                          <div class="row y-gap-10 ">

                            <div class="col-auto">
                              <form class="search-field border-light rounded-8 h-50" action="." method="get">
                                  <input class="bg-white -dark-bg-dark-2 pr-50" type="text" name="cs" placeholder="Tələbə təlimi axtar" value="{{ request.GET.cs }}">
                                  <button class="" type="submit">
                                      <i class="icon-search text-light-1 text-20"></i>
                                  </button>
                              </form>
                            </div>

                            <div class="col-auto">
                              <div class="d-flex flex-wrap y-gap-10 x-gap-20">
                                {% if c_students %}
                                  <div>
                                    <form method="post" action="{% url 'account_dashboard' %}" style="display: inline;">
                                      {% csrf_token %}
                                      <input type="hidden" name="selected_students" value="{% for cs in c_students %}{{ cs.id }}{% if not forloop.last %},{% endif %}{% endfor %}">
                                      <button type="submit" class="button -icon -purple-3 h-50 text-purple-1" title="Tələbələri aktivləşdir">
                                          Məzun et &nbsp;&nbsp; &nbsp;<i class="fa fa-check" aria-hidden="true"></i>
                                      </button>
                                      <!-- rest of the table -->
                                    </form>
                                  </div>
                                {% endif %}
                                <div>
                                  <a href="{% url "course_student_add" %}" class="button -icon -purple-3 h-50 text-purple-1" title="Əlavə et" style="background:#5cb85c;color:white!important;">
                                    Əlavə et &nbsp;&nbsp; &nbsp;<i class="fa fa-plus" aria-hidden="true"></i>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="tDiv">
                            <div class="table-responsive">
                              <table class="table" style="margin-top:25px; padding: 0px;">
                                <thead>
                                  <tr>
                                    <th>№</th>
                                    <th>Ad Soyad</th>
                                    <th>Qrup</th>
                                    <th>Təlim adı</th>
                                    <th>Ortalama</th>
                                    <th>Ödəniş</th>
                                    <th>Endrim faizi</th>
                                    <th>Qalıq</th>
                                    <th>Status</th>
                                    <th>Reytinq</th>
                                    <th>KEB</th>
                                    <th>Əməliyyatlar</th>
                                  </tr>
                                </thead>
                                <tbody>

                                  {% for cs in c_students %}
                                    <tr>
                                      <td>{{ forloop.counter }}</td>
                                      <td>{{ cs.student.first_name }} {{ cs.student.last_name }}</td>
                                      <td>{{ cs.group.name }}</td>
                                      <td>{{ cs.course.title }}</td>
                                      <td>{{ cs.average }}</td>
                                      <td>{{ cs.payment }}</td>
                                      <td>{{ cs.discount }}</td>
                                      <td>{{ cs.rest }}</td>
                                      {% if cs.is_active %}
                                        <td style="color: lime;">Məzun</td>
                                      {% else %}
                                        <td style="color: red;">Tələbə</td>
                                      {% endif %}
                                        <td>
                                          {% if cs.rating %}
                                            <div class="d-flex x-gap-5 items-center">
                                              {% for _ in ''|ljust:cs.rating %}
                                                <div class="icon-star text-9 text-yellow-1"></div>
                                              {% endfor %}
                                            </div>
                                        </td>
                                      {% endif %}
                                      <td>
                                        <div class="">
                                          {% if cs.is_keb %}
                                          <form method="post" action="{% url "keb_delete" cs.pk %}" style="display: inline;">
                                            {% csrf_token %}
                                            <button type="submit" class="button -icon wt dif -purple-3 h-50 text-purple-1" style="color:white" title="kebdən çıxart et">
                                              <i class="fa fa-check" aria-hidden="true"></i>
                                            </button>
                                          </form>
                                          {% else %}
                                            <form method="post" action="{% url "keb_undelete" cs.pk %}" style="display: inline;">
                                              {% csrf_token %}
                                              <button type="submit" class="button -icon wt dif -purple-3 h-50 text-purple-1" style="color:white" title="kebə daxil et">
                                                <i class="fa fa-minus" aria-hidden="true"></i>
                                              </button>
                                            </form>
  
                                          {% endif %}
                                        </div>
                                      </td>
                                      <td>
                                        <div class="menusuboper">
                                          {% comment %} <a href="#" class="button  -icon wt dif -purple-3 h-50 text-purple-1" title="Ətraflı">
                                            <i class="fa fa-eye" aria-hidden="true"></i>
                                          </a> {% endcomment %}
                                          <a href="{% url "course_student_edit" cs.pk %}" class="button -icon wt dif -purple-3 h-50 text-purple-1" title="Redaktə">
                                            <i class="fa fa-pencil" aria-hidden="true"></i>
                                          </a>
                                          <form method="post" action="{% url "course_student_delete" cs.pk %}" style="display: inline;">
                                            {% csrf_token %}
                                            <button type="submit" class="button -icon wt dif -purple-3 h-50 text-purple-1" onclick="return confirm('Silmək istədiyinizə əminsiniz?');" style="background:#c9302c; color:white" title="Sil">
                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                            </button>
                                          </form>
                                        </div>
                                      </td>
                                    </tr>
                                  {% endfor %}

                                </tbody>
                              </table>
                            </div>
                          </div>

                        </div>

                        <div class="tabs__pane -tab-item-3" data-pane="tab3">
                          <div class="row y-gap-10 ">

                            <div class="col-auto">
                              <form class="search-field border-light rounded-8 h-50" action="." method="get">
                                  <input class="bg-white -dark-bg-dark-2 pr-50" type="text" name="g" placeholder="Qrup axtar" value="{{ request.GET.g }}">
                                  <button class="" type="submit">
                                      <i class="icon-search text-light-1 text-20"></i>
                                  </button>
                              </form>
                            </div>

                            <div class="col-auto">
                              <div class="d-flex flex-wrap y-gap-10 x-gap-20">
                                <div>
                                </div>
                                <div>
                                  <a href="{% url "group_add" %}" class="button -icon -purple-3 h-50 text-purple-1" title="Əlavə et" style="background:#5cb85c;color:white!important;">
                                    Əlavə et &nbsp;&nbsp; &nbsp;<i class="fa fa-plus" aria-hidden="true"></i>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="tDiv">
                            <div class="table-responsive">
                              <table class="table" style="margin-top:25px; padding: 0px;">
                                <thead>
                                  <tr>
                                    <th>№</th>
                                    <th>Qrup adı</th>
                                    <th>Əməliyyatlar</th>
                                  </tr>
                                </thead>
                                <tbody>

                                  {% for group in groups %}
                                    <tr>
                                      <td>{{ forloop.counter }}</td>
                                      <td>{{ group.name }}</td>

                                      <td>
                                        <div class="menusuboper">
         
                                          <a href="{% url "group_edit" group.pk %}" class="button -icon wt dif -purple-3 h-50 text-purple-1" title="Redaktə">
                                            <i class="fa fa-pencil" aria-hidden="true"></i>
                                          </a>

                                        </div>
                                      </td>
                                    </tr>
                                  {% endfor %}

                                </tbody>
                              </table>
                            </div>
                          </div>

                        </div>

                        <div class="tabs__pane -tab-item-4" data-pane="tab4">
                          <div class="row y-gap-10 ">

                            <div class="col-auto">
                              <form class="search-field border-light rounded-8 h-50" action="." method="get">
                                  <input class="bg-white -dark-bg-dark-2 pr-50" type="text" name="k" placeholder="Tələbə axtar" value="{{ request.GET.k }}">
                                  <button class="" type="submit">
                                      <i class="icon-search text-light-1 text-20"></i>
                                  </button>
                              </form>
                            </div>

                            <div class="col-auto">

                            </div>
                          </div>

                          <div class="tDiv">
                            <div class="table-responsive">
                              <table class="table" style="margin-top:25px; padding: 0px;">
                                <thead>
                                  <tr>
                                    <th>№</th>
                                    <th>Ad Soyad</th>
                                    <th>Qrup</th>
                                    <th>Təlim adı</th>
                                    <th>Ortalama</th>
                                    <th>Reytinq</th>
                                    <th>Əməliyyatlar</th>
                                  </tr>
                                </thead>
                                <tbody>

                                  {% for cs in k_students %}
                                    <tr>
                                      <td>{{ forloop.counter }}</td>
                                      <td>{{ cs.student.first_name }} {{ cs.student.last_name }}</td>
                                      <td>{{ cs.group.name }}</td>
                                      <td>{{ cs.course.title }}</td>
                                      <td>{{ cs.average }}</td>
                                      <td>
                                        {% if cs.rating %}
                                          <div class="d-flex x-gap-5 items-center">
                                            {% for _ in ''|ljust:cs.rating %}
                                              <div class="icon-star text-9 text-yellow-1"></div>
                                            {% endfor %}
                                        </div>
                                        {% endif %}
                                      </td>
                                      <td>
                                        <div class="menusuboper">
                                          <form method="post" action="{% url "keb_delete" cs.pk %}" style="display: inline;">
                                            {% csrf_token %}
                                            <button type="submit" class="button -icon wt dif -purple-3 h-50 text-purple-1" style="color:white" title="kebdən çıxart et">
                                              <i class="fa fa-minus" aria-hidden="true"></i>
                                            </button>
                                          </form>
                                          <a href="{% url "course_student_edit" cs.pk %}" class="button -icon wt dif -purple-3 h-50 text-purple-1" title="Redaktə">
                                            <i class="fa fa-pencil" aria-hidden="true"></i>
                                          </a>
                                        </div>
                                      </td>
                                    </tr>
                                  {% endfor %}

                                </tbody>
                              </table>
                            </div>
                          </div>

  


                        </div>

                        <div class="tabs__pane -tab-item-5" data-pane="tab5">
                          <div class="row y-gap-10 ">

                            <div class="col-auto">
                              <form class="search-field border-light rounded-8 h-50" action="." method="get">
                                  <input class="bg-white -dark-bg-dark-2 pr-50" type="text" name="af" placeholder="Tələbə axtar" value="{{ request.GET.af }}">
                                  <button class="" type="submit">
                                      <i class="icon-search text-light-1 text-20"></i>
                                  </button>
                              </form>
                            </div>

                            <div class="col-auto">

                            </div>
                          </div>

                          <div class="tDiv">
                            <div class="table-responsive">
                              <table class="table" style="margin-top:25px; padding: 0px;">
                                <thead>
                                  <tr>
                                    <th>№</th>
                                    <th>Ad Soyad</th>
                                    <th>Rəy</th>
                                    <th>Əməliyyatlar</th>
                                  </tr>
                                </thead>
                                <tbody>

                                  {% for cs in allow_feedback %}
                                    <tr>
                                      <td>{{ forloop.counter }}</td>
                                      <td>{{ cs.first_name }} {{ cs.last_name }}</td>
                                      <td>{{ cs.feedback }}</td>
                                      <td>
                                        <div class="menusuboper">
                                          <form method="post" action="{% url "student_feedback_delete" cs.pk %}" style="display: inline;">
                                            {% csrf_token %}
                                            <button type="submit" class="button -icon wt dif -purple-3 h-50 text-purple-1" style="color:white" title="kebdən çıxart et">
                                              <i class="fa fa-minus" aria-hidden="true"></i>
                                            </button>
                                          </form>
                                        </div>
                                      </td>
                                    </tr>
                                  {% endfor %}

                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>

                        <div class="tabs__pane -tab-item-6" data-pane="tab6">
                          <div class="row y-gap-10 ">

                            <div class="col-auto">
                              <form class="search-field border-light rounded-8 h-50" action="." method="get">
                                  <input class="bg-white -dark-bg-dark-2 pr-50" type="text" name="df" placeholder="Tələbə axtar" value="{{ request.GET.df }}">
                                  <button class="" type="submit">
                                      <i class="icon-search text-light-1 text-20"></i>
                                  </button>
                              </form>
                            </div>

                            <div class="col-auto">

                            </div>
                          </div>

                          <div class="tDiv">
                            <div class="table-responsive">
                              <table class="table" style="margin-top:25px; padding: 0px;">
                                <thead>
                                  <tr>
                                    <th>№</th>
                                    <th>Ad Soyad</th>
                                    <th>Rəy</th>
                                    <th>Əməliyyatlar</th>
                                  </tr>
                                </thead>
                                <tbody>

                                  {% for cs in dont_allow_feedback %}
                                    <tr>
                                      <td>{{ forloop.counter }}</td>
                                      <td>{{ cs.first_name }} {{ cs.last_name }}</td>
                                      <td>{{ cs.feedback }}</td>
                                      <td>
                                        <div class="menusuboper">
                                          <form method="post" action="{% url "student_feedback_undelete" cs.pk %}" style="display: inline;">
                                            {% csrf_token %}
                                            <button type="submit" class="button -icon wt dif -purple-3 h-50 text-purple-1" style="color:white" title="kebdən çıxart et">
                                              <i class="fa fa-plus" aria-hidden="true"></i>
                                            </button>
                                          </form>
                                        </div>
                                      </td>
                                    </tr>
                                  {% endfor %}

                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>


                    </div>
                  </div>
                </div>
              </div>

            </div>

{% endblock %}